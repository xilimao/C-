### C++指针

- 每个变量都有一个内存位置，可以使用&访问地址	
  ```
  #include <iostream>
  using namespace std;
  //获取地址
  void main()
  {
      int v1;
      char v2[10];

      cout<< "var1变量的地址:  ";
      cout<< &v1 <<endl;

      cout<< "var2变量的地址:  ";
      cout<< &v2 <<endl;

      system("pause");
  }
  ```

  >  var2变量的地址:  0034FB00
  >
  >  var1变量的地址:  0034FB14

- 指针是一个变量，其值是另一个变量的地址（内存位置的直接地址）。

- 在使用指针存储其他变量地址之前，要进行声明。

    ```
    type *var-name;
    ```

  ​***号用来指定一个变量是指针。**

#### C++中使用指针
- 三种操作：
    > 声明一个指针变量
    >
    > 把变量地址赋值给指针
    >
    > 访问指针变量中可用地址的值

    ```
  void main(){
        int var = 10; //声明实际变量
        int *ip;	  //声明指针变量

        ip = &var;    //在指针变量中存储var的地址

        //输出var的值
        cout << "var: " <<var << endl; 

        //输出var的地址
        cout <<"&var: " << &var <<endl;

        //输出指针变量中存储的地址
        cout <<"ip: "<< ip <<endl;

        //输出指针中地址对应的值
        cout <<"*ip: "<<*ip <<endl;

        //输出指针中地址对应的值的地址
        cout <<"&*ip: "<< &*ip<<endl;

        //通过指针修改var的值
        *ip = 20;
        cout<<"a: "<<var<<endl;

        system("pause");
    }
    ```

    > var: 10
    > &var: 0018FB1C
    > ip: 0018FB1C
    > *ip: 10
    > &*ip: 0018FB1C
    > a: 20  //修改成功


### 指针常量

> 指固定指向一个对象的指针，即指针本身是常量

```
void main(){
	char ch = 'a',ch1 = 'b';
	//声明指针常量
	char * const ptr = &ch;
	//打印初始化指针所指向的值
	cout << *ptr<<endl;
	//改变其所指向的值
	*ptr = 'c';
	//打印更改后的值
	cout << *ptr<<endl;

	//尝试更改存储的地址
	ptr =&ch1;
	
	system("pause");
}
```

> a
> c
>
> error C3892: “ptr”: 不能给常量赋值



> 得到结论：
>
> **初始化时指向的地址是不可改变的，但是其地址所指向的值是可以改变的。**

****

### 常量指针

> 是指向**常量** 的指针,即指针不是常量

```
void main(){
	char ch = 'a',ch1 = 'b';
	//声明常量指针
	const char* ptr = &ch;
	//打印初始化指针所指向的值
	cout << *ptr<<endl;

	//尝试改变其所指向的值
	*ptr = 'c';

	//更改存储的地址
	ptr =&ch1;
	//打印更改地址后指针所指向的值
	cout << *ptr<<endl;
	system("pause");
}
```

> error C3892: “ptr”: 不能给常量赋值
>
> a
>
> b



> 得到结论：
>
> **指针本身可以指向别的对象，但不能通过指针修改常量对象。**

### 二级指针

指针的指针

### 间接赋值

间接赋值成立的三个条件(**引用是把间接赋值成立的三个条件的后两步合二为一**。)

> 1.定义两个变量(通常一个实参一个形参)
>
> 2.建立关联：实参取地址传给形参
>
> 3.*p 形参，间接的修改实参的值

```
int a = 10; 	//定义一个变量（实参）//0级指针
int *P = NULL;	//定义一个变量（形参）//1级指针
a= 20;			//直接赋值
printf("a:%d \n",a);
p=&a;			//把实参地址赋给形参
*p = 30;		//间接赋值 ,如果p是a的地址，就间接修改a的值。
​``````````````````````````````````````````````````````````````
getLen(&a);
int getLen(int *p){
  *p = 40;		//间接赋值，如果p是a的地址
}
​``````````````````````````````````````````````````````````````
```

#### 间接赋值的应用场景

> 1. 在函数指针*p1++ = *p2++
> 2. 指针做函数参数，通过*p形参求间接的修改实参的值，这才是指针的精华

**函数调用时，形参传给实参，用实参取地址，传给形参，在被调用函数里用*p，来改变实参，把运算结果传出来。**